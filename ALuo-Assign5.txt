AvrilLuo-Assign5.txt

1) How many containers of antibiotics are currently available?
Query:
SELECT quantityOnHand
FROM item
WHERE itemDescription LIKE '%antibiotics%';
Answer: 100

2) Which volunteer(s), if any, have phone numbers that do not start with the number 2 and whose last name is not Jones.
Query:
SELECT volunteerName
FROM volunteer
WHERE volunteerTelephone IS NOT NULL
  AND volunteerTelephone NOT LIKE '2%'
  AND volunteerName NOT LIKE '%Jones%';
Answer: Gene Lewin

3) Which volunteer(s) are working on transporting tasks?
Query:
SELECT DISTINCT v.volunteerName
FROM volunteer v
JOIN assignment a ON v.volunteerId = a.volunteerId
JOIN task t ON a.taskCode = t.taskCode
JOIN task_type tt ON t.taskTypeId = tt.taskTypeId
WHERE tt.taskTypeName = 'transporting';
Answer: George Brewer

4) Which task(s) have yet to be assigned to any volunteers?
Query:
SELECT t.taskDescription
FROM task t
LEFT JOIN assignment a ON t.taskCode = a.taskCode
WHERE a.taskCode IS NULL;
Answer: 'Prepare 100 food packages'
'Take packages to the warehouse'


5) Which type(s) of package contain some kind of bottle?
Query:
SELECT DISTINCT pt.packageTypeName
FROM package_type pt
JOIN package p ON pt.packageTypeId = p.packageTypeId
JOIN package_contents pc ON p.packageId = pc.packageId
JOIN item i ON pc.itemId = i.itemId
WHERE i.itemDescription LIKE '%bottle%';
Answer: food and water

6) Which items, if any, are not in any packages?
Query:
SELECT i.itemDescription
FROM item i
LEFT JOIN package_contents pc ON i.itemId = pc.itemId
WHERE pc.itemId IS NULL;
Answer: 'bottle of antibiotics'
'bottle of aspirin'
'flashlight'
'pack of bandages'


7) Which task(s) are assigned to volunteer(s) that live in New Jersey (NJ)?
Query:
SELECT DISTINCT t.taskDescription
FROM task t
JOIN assignment a ON t.taskCode = a.taskCode
JOIN volunteer v ON a.volunteerId = v.volunteerId
WHERE v.volunteerAddress LIKE '%NJ%';
Answer: 'Prepare 20 children\'s packages'
'Prepare 100 water packages'
'Prepare 5,000 packages'


8) Which volunteers began their assignments in the first half of 2021?
Query:
SELECT DISTINCT v.volunteerName
FROM volunteer v
JOIN assignment a ON v.volunteerId = a.volunteerId
WHERE a.startDateTime BETWEEN '2021-01-01' AND '2021-06-30';
Answer: Joan Simmons, Chris Jordan

9) Which volunteers have been assigned to tasks that include packing spam?
Query:
SELECT DISTINCT v.volunteerName
FROM volunteer v
JOIN assignment a ON v.volunteerId = a.volunteerId
JOIN task t ON a.taskCode = t.taskCode
JOIN package p ON t.taskCode = p.taskCode
JOIN package_contents pc ON p.packageId = pc.packageId
JOIN item i ON pc.itemId = i.itemId
WHERE i.itemDescription LIKE '%spam%';
Answer: Julie White, Gerry Banks

10) Which item(s) (if any) have a total value of exactly $100 in one package?
Query:
SELECT DISTINCT i.itemDescription
FROM item i
JOIN package_contents pc ON i.itemId = pc.itemId
WHERE i.itemValue * pc.itemQuantity = 100;
Answer: Baby formula

11) How many volunteers are assigned to tasks with each different status?
Query:
SELECT ts.taskStatusName, COUNT(DISTINCT a.volunteerId) AS numVolunteers
FROM assignment a
JOIN task t ON a.taskCode = t.taskCode
JOIN task_status ts ON t.taskStatusId = ts.taskStatusId
GROUP BY ts.taskStatusName
ORDER BY numVolunteers DESC;
Answer: open – 4, closed – 3, pending – 2, ongoing – 1

12) Which task creates the heaviest set of packages and what is the weight?
Query:
SELECT t.taskCode, SUM(p.packageWeight) AS totalWeight
FROM task t
JOIN package p ON t.taskCode = p.taskCode
GROUP BY t.taskCode
ORDER BY totalWeight DESC
LIMIT 1;
Answer: task 106 – total weight 308

13) How many tasks are there that do not have a type of “packing”?
Query:
SELECT COUNT(*)
FROM task t
JOIN task_type tt ON t.taskTypeId = tt.taskTypeId
WHERE tt.taskTypeName <> 'packing';
Answer: 3

14) Of those items that have been packed, which item (or items) were touched by fewer than 3 volunteers?
Query:
SELECT i.itemDescription
FROM item i
JOIN package_contents pc ON i.itemId = pc.itemId
JOIN package p ON pc.packageId = p.packageId
JOIN task t ON p.taskCode = t.taskCode
JOIN assignment a ON t.taskCode = a.taskCode
GROUP BY i.itemDescription
HAVING COUNT(DISTINCT a.volunteerId) < 3;
Answer: 'can of spam'
'dried fruit'
'men\'s coat'
'sleeping bag'
'tent'
'women\'s coat'


15) Which packages have a total value of more than 100?
Query:
SELECT pc.packageId,
       SUM(i.itemValue * pc.itemQuantity) AS totalValue
FROM package_contents pc
JOIN item i ON pc.itemId = i.itemId
GROUP BY pc.packageId
HAVING totalValue > 100
ORDER BY totalValue ASC;
Answer: Packages 2，4，5，6，10